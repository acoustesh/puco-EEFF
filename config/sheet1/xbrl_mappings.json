{
  "_description": "XBRL fact mappings for Sheet1 fields. Maps field names to XBRL taxonomy concepts.",

  "fact_mappings": {
    "ingresos_ordinarios": {
      "primary": "RevenueFromContractsWithCustomers",
      "fallbacks": ["Revenue", "IngresosPorActividadesOrdinarias"],
      "context_type": "duration",
      "apply_scaling": true
    },
    "total_costo_venta": {
      "primary": "CostOfSales",
      "fallbacks": ["CostoDeVentas"],
      "context_type": "duration",
      "apply_scaling": true,
      "_note": "XBRL values in full USD, scale to MUS$ (thousands)"
    },
    "total_gasto_admin": {
      "primary": "AdministrativeExpense",
      "fallbacks": ["GastosDeAdministracion", "GastosDeAdministracionYVentas"],
      "context_type": "duration",
      "apply_scaling": true
    },
    "gross_profit": {
      "primary": "GrossProfit",
      "fallbacks": ["GananciaBruta"],
      "context_type": "duration",
      "apply_scaling": true
    },
    "profit_loss": {
      "primary": "ProfitLoss",
      "fallbacks": ["GananciaPerdida"],
      "context_type": "duration",
      "apply_scaling": true
    }
  },

  "result_key_mapping": {
    "_description": "Maps Sheet1 field names to XBRL result keys used in extract_xbrl_totals()",
    "total_costo_venta": "cost_of_sales",
    "total_gasto_admin": "admin_expense",
    "ingresos_ordinarios": "ingresos",
    "gross_profit": "gross_profit",
    "profit_loss": "profit_loss"
  },

  "section_total_mapping": {
    "_description": "Maps PDF section_id to Sheet1Data total field name",
    "nota_21": "total_costo_venta",
    "nota_22": "total_gasto_admin"
  },

  "pdf_xbrl_validations": [
    {
      "field_name": "total_costo_venta",
      "xbrl_key": "cost_of_sales",
      "display_name": "Total Costo de Venta"
    },
    {
      "field_name": "total_gasto_admin",
      "xbrl_key": "admin_expense",
      "display_name": "Total Gasto Admin"
    },
    {
      "field_name": "ingresos_ordinarios",
      "xbrl_key": "ingresos",
      "display_name": "Ingresos Ordinarios"
    }
  ],

  "validation_rules": {
    "sum_tolerance": 1,
    "_sum_tolerance_note": "Allow ±1 difference due to rounding",

    "total_validations": [
      {
        "total_field": "total_costo_venta",
        "sum_fields": [
          "cv_gastos_personal",
          "cv_materiales",
          "cv_energia",
          "cv_servicios_terceros",
          "cv_depreciacion_amort",
          "cv_deprec_leasing",
          "cv_deprec_arrend",
          "cv_serv_mineros",
          "cv_fletes",
          "cv_gastos_diferidos",
          "cv_convenios"
        ],
        "xbrl_fact": "CostOfSales",
        "description": "Nota 21 - Costo de Venta"
      },
      {
        "total_field": "total_gasto_admin",
        "sum_fields": [
          "ga_gastos_personal",
          "ga_materiales",
          "ga_servicios_terceros",
          "ga_gratificacion",
          "ga_comercializacion",
          "ga_otros"
        ],
        "xbrl_fact": "AdministrativeExpense",
        "description": "Nota 22 - Gastos de Administración y Ventas"
      }
    ],

    "cross_validations": [
      {
        "description": "Gross Profit = Revenue - Cost of Sales",
        "formula": "gross_profit == ingresos_ordinarios - abs(total_costo_venta)",
        "tolerance": 1
      }
    ]
  },

  "aggregate_facts": [
    "RevenueFromContractsWithCustomers",
    "Revenue",
    "CostOfSales",
    "GrossProfit",
    "AdministrativeExpense",
    "SellingExpense",
    "ProfitLoss",
    "ProfitLossBeforeTax"
  ]
}
